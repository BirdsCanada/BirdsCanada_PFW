<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Effort Statistics | Project FeederWatch: A Data Users Guide</title>
  <meta name="description" content="PWF data maniputations and statical summaries" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Effort Statistics | Project FeederWatch: A Data Users Guide" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/DMEthier/PFW.git" />
  <meta property="og:image" content="https://github.com/DMEthier/PFW.git/PFWbanner.png" />
  <meta property="og:description" content="PWF data maniputations and statical summaries" />
  <meta name="github-repo" content="DMEthier/PFW" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Effort Statistics | Project FeederWatch: A Data Users Guide" />
  
  <meta name="twitter:description" content="PWF data maniputations and statical summaries" />
  <meta name="twitter:image" content="https://github.com/DMEthier/PFW.git/PFWbanner.png" />

<meta name="author" content="Danielle Ethier" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Sum4.html"/>

<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="mystyles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Project FeederWatch: A Data Users Guide</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="1" data-path="Intro1.html"><a href="Intro1.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Intro1.html"><a href="Intro1.html#intro1.1"><i class="fa fa-check"></i><b>1.1</b> Project FeederWatch</a></li>
<li class="chapter" data-level="1.2" data-path="Intro1.html"><a href="Intro1.html#intro1.2"><i class="fa fa-check"></i><b>1.2</b> Goal</a></li>
<li class="chapter" data-level="1.3" data-path="Intro1.html"><a href="Intro1.html#intro1.3"><i class="fa fa-check"></i><b>1.3</b> Getting Involved</a></li>
<li class="chapter" data-level="1.4" data-path="Intro1.html"><a href="Intro1.html#intro1.4"><i class="fa fa-check"></i><b>1.4</b> Prerequisites</a></li>
<li class="chapter" data-level="1.5" data-path="Intro1.html"><a href="Intro1.html#intro1.5"><i class="fa fa-check"></i><b>1.5</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Start2.html"><a href="Start2.html"><i class="fa fa-check"></i><b>2</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Start2.html"><a href="Start2.html#Start2.1"><i class="fa fa-check"></i><b>2.1</b> Installing packages</a></li>
<li class="chapter" data-level="2.2" data-path="Start2.html"><a href="Start2.html#Start2.2"><i class="fa fa-check"></i><b>2.2</b> Working Directory</a></li>
<li class="chapter" data-level="2.3" data-path="Start2.html"><a href="Start2.html#Start2.3"><i class="fa fa-check"></i><b>2.3</b> Data download and filtering</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Zero3.html"><a href="Zero3.html"><i class="fa fa-check"></i><b>3</b> Zero-fill Matrix</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Zero3.html"><a href="Zero3.html#Zero3.1"><i class="fa fa-check"></i><b>3.1</b> Load Filtered Data</a></li>
<li class="chapter" data-level="3.2" data-path="Zero3.html"><a href="Zero3.html#Zero3.2"><i class="fa fa-check"></i><b>3.2</b> Species Range</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="Zero3.html"><a href="Zero3.html#Zero3.2.1"><i class="fa fa-check"></i><b>3.2.1</b> Provinical Range Matrix</a></li>
<li class="chapter" data-level="3.2.2" data-path="Zero3.html"><a href="Zero3.html#Zero3.2.2"><i class="fa fa-check"></i><b>3.2.2</b> Atlas Block Range Matrix</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="Zero3.html"><a href="Zero3.html#Zero3.3"><i class="fa fa-check"></i><b>3.3</b> Sampling Events</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Sum4.html"><a href="Sum4.html"><i class="fa fa-check"></i><b>4</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Sum4.html"><a href="Sum4.html#Sum4.1"><i class="fa fa-check"></i><b>4.1</b> Average number of birds per week</a></li>
<li class="chapter" data-level="4.2" data-path="Sum4.html"><a href="Sum4.html#Sum4.2"><i class="fa fa-check"></i><b>4.2</b> Average number of species per week</a></li>
<li class="chapter" data-level="4.3" data-path="Sum4.html"><a href="Sum4.html#Sum4.3"><i class="fa fa-check"></i><b>4.3</b> Average number of species per site</a></li>
<li class="chapter" data-level="4.4" data-path="Sum4.html"><a href="Sum4.html#Sum4.4"><i class="fa fa-check"></i><b>4.4</b> Percent of sites with species at least once and mean group size</a></li>
<li class="chapter" data-level="4.5" data-path="Sum4.html"><a href="Sum4.html#Sum4.5"><i class="fa fa-check"></i><b>4.5</b> Top 10 Species</a></li>
<li class="chapter" data-level="4.6" data-path="Sum4.html"><a href="Sum4.html#Sum4.6"><i class="fa fa-check"></i><b>4.6</b> Plot Species Means</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Effort5.html"><a href="Effort5.html"><i class="fa fa-check"></i><b>5</b> Effort Statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Effort5.html"><a href="Effort5.html#Effort5.1"><i class="fa fa-check"></i><b>5.1</b> Number of Sites Monitored</a></li>
<li class="chapter" data-level="5.2" data-path="Effort5.html"><a href="Effort5.html#Effort5.2"><i class="fa fa-check"></i><b>5.2</b> Number of Effort Days Monitored</a></li>
<li class="chapter" data-level="5.3" data-path="Effort5.html"><a href="Effort5.html#Effort5.3"><i class="fa fa-check"></i><b>5.3</b> Seasonal Effort</a></li>
<li class="chapter" data-level="5.4" data-path="Effort5.html"><a href="Effort5.html#Effort5.4"><i class="fa fa-check"></i><b>5.4</b> Supplemental Information</a></li>
<li class="chapter" data-level="5.5" data-path="Effort5.html"><a href="Effort5.html#Effort5.5"><i class="fa fa-check"></i><b>5.5</b> Housing and Population Denisty</a></li>
<li class="chapter" data-level="5.6" data-path="Effort5.html"><a href="Effort5.html#Effort5.6"><i class="fa fa-check"></i><b>5.6</b> Feeder Type</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Project FeederWatch: A Data Users Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Effort5" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Effort Statistics</h1>
<p>Using the sampling <code>Events</code> tables we are going to generate some effort based summary statistics. These summary statistics are generated annually to support Birds Canada’s reporting for Canadian PFW participants, and can be used to correct for effort in more involve statistical analyses.</p>
<blockquote>
<p>Let’s start this Chapter by reload our libraries and resetting our working directories in the event you took a break and are staring a new session with your newly filtered and cleaned data set.</p>
</blockquote>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="Effort5.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(tidyverse)</span>
<span id="cb36-2"><a href="Effort5.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(reshape)</span>
<span id="cb36-3"><a href="Effort5.html#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="Effort5.html#cb36-4" aria-hidden="true" tabindex="-1"></a>out.dir <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Output/&quot;</span>)</span>
<span id="cb36-5"><a href="Effort5.html#cb36-5" aria-hidden="true" tabindex="-1"></a>dat.dir <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Data/&quot;</span>)</span>
<span id="cb36-6"><a href="Effort5.html#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="Effort5.html#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Load datatables</span></span>
<span id="cb36-8"><a href="Effort5.html#cb36-8" aria-hidden="true" tabindex="-1"></a>event<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;Output/Events.csv&quot;</span>)</span>
<span id="cb36-9"><a href="Effort5.html#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Recall there are two range tables. One for Atlas blocks and one for Provinces</span></span>
<span id="cb36-10"><a href="Effort5.html#cb36-10" aria-hidden="true" tabindex="-1"></a>blk<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;Output/Range_blockcode.csv&quot;</span>)</span></code></pre></div>
<p>We will merge the <code>Events</code> table with part of the <code>Range</code> table first so that we have all the information we need in one dataframe.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="Effort5.html#cb37-1" aria-hidden="true" tabindex="-1"></a>blk<span class="ot">&lt;-</span>blk <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(loc_id, Prov, region, BlockCode) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(loc_id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-2"><a href="Effort5.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="Effort5.html#cb37-3" aria-hidden="true" tabindex="-1"></a>eff<span class="ot">&lt;-</span><span class="fu">left_join</span>(event, blk, <span class="at">by=</span><span class="st">&quot;loc_id&quot;</span>)</span></code></pre></div>
<div id="Effort5.1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Number of Sites Monitored</h2>
<p>First we will summarize the number of <code>loc_id</code> monitored in a year, regionally, provincially, and nationally. We will also plot these outputs since it is easy and interesting to look at.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="Effort5.html#cb38-1" aria-hidden="true" tabindex="-1"></a>loc_id_reg<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(region, Period) <span class="sc">%&gt;%</span> <span class="fu">summarize</span> (<span class="at">n_loc =</span> <span class="fu">n_distinct</span>(loc_id)) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;region&#39;. You can override using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="Effort5.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(loc_id_reg, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_loc))<span class="sc">+</span></span>
<span id="cb40-2"><a href="Effort5.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>region), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb40-3"><a href="Effort5.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb40-4"><a href="Effort5.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb40-5"><a href="Effort5.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of count sites (log)&quot;</span>)<span class="sc">+</span></span>
<span id="cb40-6"><a href="Effort5.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Regional&quot;</span>)<span class="sc">+</span></span>
<span id="cb40-7"><a href="Effort5.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/Eff1-1.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="Effort5.html#cb41-1" aria-hidden="true" tabindex="-1"></a>loc_id_prov<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Prov, Period) <span class="sc">%&gt;%</span> <span class="fu">summarize</span> (<span class="at">n_loc =</span> <span class="fu">n_distinct</span>(loc_id)) <span class="sc">%&gt;%</span>  <span class="fu">drop_na</span>()</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;Prov&#39;. You can override using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="Effort5.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(loc_id_prov, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_loc))<span class="sc">+</span></span>
<span id="cb43-2"><a href="Effort5.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>Prov), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb43-3"><a href="Effort5.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb43-4"><a href="Effort5.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb43-5"><a href="Effort5.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of count sites (log)&quot;</span>)<span class="sc">+</span></span>
<span id="cb43-6"><a href="Effort5.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Provincial&quot;</span>)<span class="sc">+</span></span>
<span id="cb43-7"><a href="Effort5.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/Eff1-2.png" width="672" /></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="Effort5.html#cb44-1" aria-hidden="true" tabindex="-1"></a>loc_id_nat<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period) <span class="sc">%&gt;%</span> <span class="fu">summarize</span> (<span class="at">n_loc =</span> <span class="fu">n_distinct</span>(loc_id)) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb44-2"><a href="Effort5.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="Effort5.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(loc_id_nat, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_loc))<span class="sc">+</span></span>
<span id="cb44-4"><a href="Effort5.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb44-5"><a href="Effort5.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb44-6"><a href="Effort5.html#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb44-7"><a href="Effort5.html#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of count sites&quot;</span>)<span class="sc">+</span></span>
<span id="cb44-8"><a href="Effort5.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;National&quot;</span>)<span class="sc">+</span></span>
<span id="cb44-9"><a href="Effort5.html#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2020</span>, <span class="at">y=</span><span class="dv">2172</span>), <span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb44-10"><a href="Effort5.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">2017</span>, <span class="at">y =</span> <span class="dv">2200</span>, <span class="at">label =</span> <span class="st">&quot;COVID-19&quot;</span>, <span class="at">colour=</span><span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/Eff1-3.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="Effort5.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(<span class="fu">format</span>(loc_id_reg, <span class="at">digits=</span><span class="dv">4</span>), <span class="at">file =</span> <span class="fu">paste</span>(out.dir,<span class="st">&quot;Site Effort_reg.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">col.name =</span> <span class="cn">TRUE</span>, <span class="at">append =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb45-2"><a href="Effort5.html#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="Effort5.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(<span class="fu">format</span>(loc_id_prov, <span class="at">digits=</span><span class="dv">4</span>), <span class="at">file =</span> <span class="fu">paste</span>(out.dir,<span class="st">&quot;Site Effort_prov.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">col.name =</span> <span class="cn">TRUE</span>, <span class="at">append =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb45-4"><a href="Effort5.html#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="Effort5.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(<span class="fu">format</span>(loc_id_nat, <span class="at">digits=</span><span class="dv">4</span>), <span class="at">file =</span> <span class="fu">paste</span>(out.dir,<span class="st">&quot;Site Effort_nat.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">col.name =</span> <span class="cn">TRUE</span>, <span class="at">append =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
</div>
<div id="Effort5.2" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Number of Effort Days Monitored</h2>
<p>Next, we can look at the number of half days monitored. This has been consistently recorded since 2014, so we will truncate the <code>Period</code> to only include dates later then this.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="Effort5.html#cb46-1" aria-hidden="true" tabindex="-1"></a>days_reg<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(region, Period) <span class="sc">%&gt;%</span> <span class="fu">summarize</span> (<span class="at">n_days =</span> <span class="fu">sum</span>(Effort_days)) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Period<span class="sc">&gt;=</span><span class="dv">2014</span>)</span>
<span id="cb46-2"><a href="Effort5.html#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="Effort5.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(days_reg, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_days))<span class="sc">+</span></span>
<span id="cb46-4"><a href="Effort5.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>region), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb46-5"><a href="Effort5.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb46-6"><a href="Effort5.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb46-7"><a href="Effort5.html#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of 1/2 count days (log)&quot;</span>)<span class="sc">+</span></span>
<span id="cb46-8"><a href="Effort5.html#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Regional&quot;</span>)<span class="sc">+</span></span>
<span id="cb46-9"><a href="Effort5.html#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/eff2-1.png" width="672" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="Effort5.html#cb47-1" aria-hidden="true" tabindex="-1"></a>days_prov<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Prov, Period) <span class="sc">%&gt;%</span> <span class="fu">summarize</span> (<span class="at">n_days =</span> <span class="fu">sum</span>(Effort_days)) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Period<span class="sc">&gt;=</span><span class="dv">2014</span>)</span>
<span id="cb47-2"><a href="Effort5.html#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="Effort5.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(days_prov, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_days))<span class="sc">+</span></span>
<span id="cb47-4"><a href="Effort5.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>Prov), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb47-5"><a href="Effort5.html#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb47-6"><a href="Effort5.html#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb47-7"><a href="Effort5.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of 1/2 count days (log)&quot;</span>)<span class="sc">+</span></span>
<span id="cb47-8"><a href="Effort5.html#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Provinical&quot;</span>)<span class="sc">+</span></span>
<span id="cb47-9"><a href="Effort5.html#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/eff2-2.png" width="672" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="Effort5.html#cb48-1" aria-hidden="true" tabindex="-1"></a>days_nat<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period) <span class="sc">%&gt;%</span> <span class="fu">summarize</span> (<span class="at">n_days =</span> <span class="fu">sum</span>(Effort_days)) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Period<span class="sc">&gt;=</span><span class="dv">2014</span>)</span>
<span id="cb48-2"><a href="Effort5.html#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="Effort5.html#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(days_nat, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_days))<span class="sc">+</span></span>
<span id="cb48-4"><a href="Effort5.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb48-5"><a href="Effort5.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb48-6"><a href="Effort5.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb48-7"><a href="Effort5.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of count 1/2 days (log)&quot;</span>)<span class="sc">+</span></span>
<span id="cb48-8"><a href="Effort5.html#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;National&quot;</span>)<span class="sc">+</span></span>
<span id="cb48-9"><a href="Effort5.html#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/eff2-3.png" width="672" /></p>
</div>
<div id="Effort5.3" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Seasonal Effort</h2>
<p>It might be interesting to look at seasonal changes in effort. For example, are more forms submitted at the beginning of the PFW season than the end? We can assess this using the <code>sub_id</code>, but will need to use the fully cleaned PFW data file for this task.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="Effort5.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb49-2"><a href="Effort5.html#cb49-2" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;Data/PFW_Canada_All.csv&quot;</span>)</span>
<span id="cb49-3"><a href="Effort5.html#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="Effort5.html#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the dataframe</span></span>
<span id="cb49-5"><a href="Effort5.html#cb49-5" aria-hidden="true" tabindex="-1"></a>dat<span class="ot">&lt;-</span>data <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(loc_id, Prov, sub_id, Period, floor.week)</span>
<span id="cb49-6"><a href="Effort5.html#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="Effort5.html#cb49-7" aria-hidden="true" tabindex="-1"></a>form_reg<span class="ot">&lt;-</span>dat <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period, floor.week) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">n_form=</span><span class="fu">n_distinct</span>(sub_id)) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb49-8"><a href="Effort5.html#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="Effort5.html#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(form_reg, <span class="fu">aes</span>(<span class="at">x=</span>floor.week, <span class="at">y=</span>n_form))<span class="sc">+</span></span>
<span id="cb49-10"><a href="Effort5.html#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb49-11"><a href="Effort5.html#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb49-12"><a href="Effort5.html#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.text.x=</span><span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb49-13"><a href="Effort5.html#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of forms submitted weekly&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/eff3-1.png" width="672" /></p>
</div>
<div id="Effort5.4" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Supplemental Information</h2>
<p>In addition to observation counts of birds at PFW locations, there is a single file containing supplementary information about the count locations (sites). This information is submitted by users. This file can be downloaded from the Cornell Lab PFW <a href="https://feederwatch.org/explore/raw-dataset-requests/">website</a>. Once it is saved in your <code>Data</code> folder, we can begin exploring patterns in counts and habitat metrics.</p>
<p>First, we will load the supplementary data and merge it to the site effort data previously compiled.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="Effort5.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#change this file name to match what is used in your Data folder</span></span>
<span id="cb50-2"><a href="Effort5.html#cb50-2" aria-hidden="true" tabindex="-1"></a>hab<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;Data/PFW_count_site_data_public_2021.csv&quot;</span>) </span>
<span id="cb50-3"><a href="Effort5.html#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="Effort5.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">#separate the Period</span></span>
<span id="cb50-5"><a href="Effort5.html#cb50-5" aria-hidden="true" tabindex="-1"></a>hab<span class="ot">&lt;-</span>hab <span class="sc">%&gt;%</span> </span>
<span id="cb50-6"><a href="Effort5.html#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(proj_period_id, <span class="fu">c</span>(<span class="st">&quot;del1&quot;</span>, <span class="st">&quot;Period&quot;</span>), <span class="at">sep=</span><span class="st">&quot;_&quot;</span>, <span class="at">remove=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb50-7"><a href="Effort5.html#cb50-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span> (<span class="sc">-</span>del1, <span class="sc">-</span>proj_period_id) </span>
<span id="cb50-8"><a href="Effort5.html#cb50-8" aria-hidden="true" tabindex="-1"></a>hab<span class="sc">$</span>Period<span class="ot">&lt;-</span><span class="fu">as.integer</span>(hab<span class="sc">$</span>Period)</span>
<span id="cb50-9"><a href="Effort5.html#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="Effort5.html#cb50-10" aria-hidden="true" tabindex="-1"></a>eff<span class="ot">&lt;-</span><span class="fu">left_join</span>(eff, hab, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;loc_id&quot;</span>, <span class="st">&quot;Period&quot;</span>))</span></code></pre></div>
<p>The <code>FeederWatch_Data_Dictionary.xls</code>, saved in the project working directory, will give you more information about each covariate in the <code>Site Description Field Details</code> tab.</p>
</div>
<div id="Effort5.5" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Housing and Population Denisty</h2>
<p>Let’s summarize changes in housing density of the neighborhood reported over time, where 1 = “rural”, 2 = “rural/suburban”, 3 = “suburban”, 4 = “urban”.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="Effort5.html#cb51-1" aria-hidden="true" tabindex="-1"></a>house<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">select</span>(loc_id, Period, housing_density) <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="Effort5.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-3"><a href="Effort5.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">HouseDensity=</span><span class="fu">ifelse</span>(housing_density <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;rural&quot;</span>, <span class="fu">ifelse</span>(housing_density <span class="sc">==</span><span class="dv">2</span>, <span class="st">&quot;rural/suburban&quot;</span>, <span class="fu">ifelse</span>(housing_density<span class="sc">==</span><span class="dv">3</span>, <span class="st">&quot;suburban&quot;</span>, <span class="fu">ifelse</span>(housing_density<span class="sc">==</span><span class="dv">4</span>, <span class="st">&quot;urban&quot;</span>, <span class="st">&quot;NA&quot;</span>))))) </span>
<span id="cb51-4"><a href="Effort5.html#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="Effort5.html#cb51-5" aria-hidden="true" tabindex="-1"></a>house_sum<span class="ot">&lt;-</span>house<span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period, HouseDensity) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n_sites=</span><span class="fu">length</span>(loc_id)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(HouseDensity<span class="sc">!=</span><span class="st">&quot;NA&quot;</span>)</span>
<span id="cb51-6"><a href="Effort5.html#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="Effort5.html#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(house_sum, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_sites))<span class="sc">+</span></span>
<span id="cb51-8"><a href="Effort5.html#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>HouseDensity), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb51-9"><a href="Effort5.html#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb51-10"><a href="Effort5.html#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb51-11"><a href="Effort5.html#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of site&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/house-1.png" width="672" /></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="Effort5.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This can also be summarized by Province or Region</span></span>
<span id="cb52-2"><a href="Effort5.html#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="Effort5.html#cb52-3" aria-hidden="true" tabindex="-1"></a>house<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">select</span>(loc_id, Period, region, housing_density) <span class="sc">%&gt;%</span> </span>
<span id="cb52-4"><a href="Effort5.html#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb52-5"><a href="Effort5.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">HouseDensity=</span><span class="fu">ifelse</span>(housing_density <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;rural&quot;</span>, <span class="fu">ifelse</span>(housing_density <span class="sc">==</span><span class="dv">2</span>, <span class="st">&quot;rural/suburban&quot;</span>, <span class="fu">ifelse</span>(housing_density<span class="sc">==</span><span class="dv">3</span>, <span class="st">&quot;suburban&quot;</span>, <span class="fu">ifelse</span>(housing_density<span class="sc">==</span><span class="dv">4</span>, <span class="st">&quot;urban&quot;</span>, <span class="st">&quot;NA&quot;</span>))))) </span>
<span id="cb52-6"><a href="Effort5.html#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="Effort5.html#cb52-7" aria-hidden="true" tabindex="-1"></a>house_sum<span class="ot">&lt;-</span>house<span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period, region, HouseDensity) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n_sites=</span><span class="fu">length</span>(loc_id)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(HouseDensity<span class="sc">!=</span><span class="st">&quot;NA&quot;</span>)</span>
<span id="cb52-8"><a href="Effort5.html#cb52-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-9"><a href="Effort5.html#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(house_sum, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_sites))<span class="sc">+</span></span>
<span id="cb52-10"><a href="Effort5.html#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>region), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb52-11"><a href="Effort5.html#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>HouseDensity)<span class="sc">+</span></span>
<span id="cb52-12"><a href="Effort5.html#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb52-13"><a href="Effort5.html#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb52-14"><a href="Effort5.html#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of site&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/house-2.png" width="672" /></p>
<p>Now let’s summarize changes population at least, summarized over time, where 1 = less than 5,000; 5001 = 5,001 - 25,000; 25001 = 25,001 - 100,000; 100001 = &gt; 100,000. This will be compared visually to housing density to see if the two coincide.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="Effort5.html#cb53-1" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">select</span>(loc_id, Period, population_atleast) <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="Effort5.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="Effort5.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PopDensity=</span><span class="fu">ifelse</span>(population_atleast <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;&lt; 5000&quot;</span>, <span class="fu">ifelse</span>(population_atleast <span class="sc">==</span> <span class="dv">5001</span>, <span class="st">&quot;5000 - 25,000&quot;</span>, <span class="fu">ifelse</span>(population_atleast<span class="sc">==</span><span class="dv">25001</span>, <span class="st">&quot;25,000 - 100,000&quot;</span>, <span class="fu">ifelse</span>(population_atleast<span class="sc">==</span><span class="dv">100001</span>, <span class="st">&quot;&gt; 100,000&quot;</span>, <span class="st">&quot;NA&quot;</span>))))) </span>
<span id="cb53-4"><a href="Effort5.html#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="Effort5.html#cb53-5" aria-hidden="true" tabindex="-1"></a>pop_sum<span class="ot">&lt;-</span>pop<span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period, PopDensity) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n_sites=</span><span class="fu">length</span>(loc_id)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PopDensity<span class="sc">!=</span><span class="st">&quot;NA&quot;</span>)</span>
<span id="cb53-6"><a href="Effort5.html#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="Effort5.html#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pop_sum, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_sites))<span class="sc">+</span></span>
<span id="cb53-8"><a href="Effort5.html#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>PopDensity), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb53-9"><a href="Effort5.html#cb53-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb53-10"><a href="Effort5.html#cb53-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb53-11"><a href="Effort5.html#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of site&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/pop-1.png" width="672" /></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="Effort5.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#what if we rename these to be consistent with the housing density classifications</span></span>
<span id="cb54-2"><a href="Effort5.html#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="Effort5.html#cb54-3" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">select</span>(loc_id, Period, population_atleast) <span class="sc">%&gt;%</span> </span>
<span id="cb54-4"><a href="Effort5.html#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-5"><a href="Effort5.html#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PopDensity=</span><span class="fu">ifelse</span>(population_atleast <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;rural&quot;</span>, <span class="fu">ifelse</span>(population_atleast <span class="sc">==</span> <span class="dv">5001</span>, <span class="st">&quot;rural/suburban&quot;</span>, <span class="fu">ifelse</span>(population_atleast<span class="sc">==</span><span class="dv">25001</span>, <span class="st">&quot;suburban&quot;</span>, <span class="fu">ifelse</span>(population_atleast<span class="sc">==</span><span class="dv">100001</span>, <span class="st">&quot;urban&quot;</span>, <span class="st">&quot;NA&quot;</span>))))) </span>
<span id="cb54-6"><a href="Effort5.html#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="Effort5.html#cb54-7" aria-hidden="true" tabindex="-1"></a>pop_sum<span class="ot">&lt;-</span>pop<span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period, PopDensity) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n_sites=</span><span class="fu">length</span>(loc_id)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PopDensity<span class="sc">!=</span><span class="st">&quot;NA&quot;</span>)</span>
<span id="cb54-8"><a href="Effort5.html#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="Effort5.html#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pop_sum, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>n_sites))<span class="sc">+</span></span>
<span id="cb54-10"><a href="Effort5.html#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>PopDensity), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb54-11"><a href="Effort5.html#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb54-12"><a href="Effort5.html#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb54-13"><a href="Effort5.html#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of site&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/pop-2.png" width="672" /></p>
</div>
<div id="Effort5.6" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Feeder Type</h2>
<p>Another factor that could influence the types and number of birds counted is the feeder type and number. Let summarize those next.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="Effort5.html#cb55-1" aria-hidden="true" tabindex="-1"></a>feed<span class="ot">&lt;-</span>eff <span class="sc">%&gt;%</span> <span class="fu">select</span>(loc_id, Period, region, numfeeders_suet, numfeeders_ground, numfeeders_hanging, numfeeders_hopper, numfeeders_platfrm, numfeeders_tube, numfeeders_other, numfeeders_thistle, numfeeders_water, numfeeders_humming, numfeeders_fruit) <span class="sc">%&gt;%</span> <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(loc_id, Period) <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">TotFeederType =</span> <span class="fu">sum</span>(numfeeders_suet <span class="sc">+</span> numfeeders_ground <span class="sc">+</span> numfeeders_hanging <span class="sc">+</span> numfeeders_hopper <span class="sc">+</span> numfeeders_platfrm <span class="sc">+</span> numfeeders_tube <span class="sc">+</span>numfeeders_other <span class="sc">+</span> numfeeders_thistle <span class="sc">+</span> numfeeders_water <span class="sc">+</span> numfeeders_humming <span class="sc">+</span> numfeeders_fruit))</span>
<span id="cb55-2"><a href="Effort5.html#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="Effort5.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove 0 from total counts. Assume this is just missing data. </span></span>
<span id="cb55-4"><a href="Effort5.html#cb55-4" aria-hidden="true" tabindex="-1"></a>feed<span class="ot">&lt;-</span>feed <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TotFeederType <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb55-5"><a href="Effort5.html#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="Effort5.html#cb55-6" aria-hidden="true" tabindex="-1"></a>feed_sum<span class="ot">&lt;-</span>feed <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period, region) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">MeanFeeder =</span> <span class="fu">mean</span>(TotFeederType), <span class="at">TotalFeeder =</span> <span class="fu">sum</span>(TotFeederType))</span>
<span id="cb55-7"><a href="Effort5.html#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="Effort5.html#cb55-8" aria-hidden="true" tabindex="-1"></a>feed_sum<span class="ot">&lt;-</span>feed_sum <span class="sc">%&gt;%</span> <span class="fu">filter</span>(region<span class="sc">!=</span><span class="st">&quot;North&quot;</span>)</span>
<span id="cb55-9"><a href="Effort5.html#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="Effort5.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(feed_sum, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>MeanFeeder))<span class="sc">+</span></span>
<span id="cb55-11"><a href="Effort5.html#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>region), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb55-12"><a href="Effort5.html#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb55-13"><a href="Effort5.html#cb55-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb55-14"><a href="Effort5.html#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mean number of feeders&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/numfeeder-1.png" width="672" /></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="Effort5.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#the total number of feeders is going to be correlated with the total number of sites being monitored</span></span>
<span id="cb56-2"><a href="Effort5.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(feed_sum, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>TotalFeeder))<span class="sc">+</span></span>
<span id="cb56-3"><a href="Effort5.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>region), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb56-4"><a href="Effort5.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb56-5"><a href="Effort5.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb56-6"><a href="Effort5.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Total number of feeders&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/numfeeder-2.png" width="672" /></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="Effort5.html#cb57-1" aria-hidden="true" tabindex="-1"></a>feed_sum<span class="ot">&lt;-</span>feed <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Period) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">suet =</span> <span class="fu">mean</span>(numfeeders_suet), <span class="at">groud=</span><span class="fu">mean</span>(numfeeders_ground), <span class="at">hanging=</span><span class="fu">mean</span>(numfeeders_hanging), <span class="at">hopper=</span><span class="fu">mean</span>(numfeeders_hopper), <span class="at">platfrm =</span> <span class="fu">mean</span>(numfeeders_platfrm), <span class="at">tube =</span> <span class="fu">mean</span>(numfeeders_tube), <span class="at">thistle =</span> <span class="fu">mean</span>(numfeeders_thistle), <span class="at">water =</span> <span class="fu">mean</span>(numfeeders_water), <span class="at">humming=</span> <span class="fu">mean</span>(numfeeders_humming), <span class="at">fruit =</span> <span class="fu">mean</span>(numfeeders_fruit), <span class="at">other =</span> <span class="fu">mean</span>(numfeeders_other))</span>
<span id="cb57-2"><a href="Effort5.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="Effort5.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">#melt the dataframe for plotting</span></span>
<span id="cb57-4"><a href="Effort5.html#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="Effort5.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">#feed_sum&lt;-melt(feed_sum, id=&quot;Period&quot;, value.name = &quot;Mean&quot;)</span></span>
<span id="cb57-6"><a href="Effort5.html#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="Effort5.html#cb57-7" aria-hidden="true" tabindex="-1"></a>feed_sum<span class="ot">&lt;-</span>feed_sum <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">gather</span> (<span class="st">&quot;FeederType&quot;</span>, <span class="st">&quot;Mean&quot;</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb57-8"><a href="Effort5.html#cb57-8" aria-hidden="true" tabindex="-1"></a>feed_sum<span class="ot">&lt;-</span>feed_sum <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Mean<span class="sc">&gt;</span><span class="dv">0</span>)</span>
<span id="cb57-9"><a href="Effort5.html#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="Effort5.html#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(feed_sum, <span class="fu">aes</span>(<span class="at">x=</span>Period, <span class="at">y=</span>Mean))<span class="sc">+</span></span>
<span id="cb57-11"><a href="Effort5.html#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">colour=</span>FeederType), <span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb57-12"><a href="Effort5.html#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb57-13"><a href="Effort5.html#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb57-14"><a href="Effort5.html#cb57-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Mean number of feeders&quot;</span>)</span></code></pre></div>
<p><img src="05-PFWEffortStats_files/figure-html/numfeeder-3.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Sum4.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
